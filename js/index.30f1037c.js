import{r as c,o as l,c as _,a as p,_ as Z,C as x,w as h,b as m,d as g,t as S,e as T,F as f,f as E,v as A,g as P,n as H,K as J,h as F,i as Y,j as Q,V as R,k as X,l as ee,m as te,p as ne,q as oe,M as I,s as se}from"./mock.96d8fd81.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};re();var b=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const ae={name:"App"},ie={id:"app"};function le(e,t,n,o,s,r){const i=c("router-view");return l(),_("div",ie,[(l(),p(i,{key:e.$route.fullPath}))])}var ce=b(ae,[["render",le]]);const ue="modulepreload",U={},de="/test/",w=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${de}${o}`,o in U)return;U[o]=!0;const s=o.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const i=document.createElement("link");if(i.rel=s?"stylesheet":ue,s||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),s)return new Promise((d,y)=>{i.addEventListener("load",d),i.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},me=Z,he=e=>me(e).length===0,pe=(e,t)=>{if(!e.length||!t)return;let n=-1,o=e.length;for(;++n<o;){let s=e[n];t(s,n,e)}},_e=(e,t)=>Array.from(new Set([...e,...t])),ge=(e,t)=>e.some(n=>t.indexOf(n)>-1),dt=e=>(console.log("value",e),new RegExp(/[0][9][0-9]{8}$/,"g").test(e)),mt=e=>{let t=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;return e.search(t)!==-1},ht=e=>new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,"g").test(e);var M={title:"\u66F8\u57CE_\u5C55\u793A(\u958B\u767C\u4E2D)",baseUrl:{dev:window.location.origin,pro:window.location.origin},homeName:"home",plugin:{"error-store":{showInHeader:!0,developmentOff:!0}},useI18n:!0,cookieExpires:1};const B="token",{title:pt,cookieExpires:fe}=M,ye=e=>localStorage.getItem(e)||"",ve=e=>e.children&&e.children.length!==0,z=(e,t)=>e.meta&&e.meta.access&&e.meta.access.length?!!ge(e.meta.access,t):!0,q=(e,t)=>{let n=[];return pe(e,o=>{if(!o.meta||o.meta&&!o.meta.hideInMenu){let s={icon:o.meta&&o.meta.icon||"",name:o.name,meta:o.meta};(ve(o)||o.meta&&o.meta.showAlways&&z(o,access))&&(s.children=q(o.children,t)),o.meta&&o.meta.href&&(s.href=o.meta.href),z(o,t)&&n.push(s)}}),n},we=(e,t)=>t.$config.useI18n?t.$t(e.name):e.meta&&e.meta.title||e.name,ke=e=>{x.set(B,e,{expires:fe||1})},Se=()=>{const e=x.get(B);return e||!1},Ne=e=>{const t=e.split("?")[1].split("&");let n={};return t.forEach(o=>{const s=o.split("=");n[s[0]]=s[1]}),n};var V={components:{},methods:{showTitle(e){return we(e,this)},showChildren(e){return e.children&&(e.children.length>1||e.meta&&e.meta.showAlways)},getNameOrHref(e,t){return e.href?`isTurnByHref_${e.href}`:t?e.children[0].name:e.name}}},Ie={props:{parentItem:{type:Object,default:()=>{}},theme:String,iconSize:Number},computed:{parentName(){return this.parentItem.name},children(){return this.parentItem.children},textColor(){return this.theme==="dark"?"#fff":"#495060"}}};const be={name:"SideMenuItem",mixins:[V,Ie]},$e={style:{"font-size":"15px"}},Oe={style:{"font-size":"15px"}};function Le(e,t,n,o,s,r){const i=c("Icon"),d=c("side-menu-item",!0),y=c("menu-item"),v=c("Submenu");return l(),p(v,{name:`${e.parentName}`},{title:h(()=>[m(i,{type:e.parentItem.icon||""},null,8,["type"]),g("span",$e,S(e.showTitle(e.parentItem)),1)]),default:h(()=>[(l(!0),_(f,null,T(e.children,u=>(l(),_(f,null,[u.children&&u.children.length===1?(l(),_(f,{key:0},[e.showChildren(u)?(l(),p(d,{key:`menu-${u.name}`,"parent-item":u},null,8,["parent-item"])):(l(),p(y,{name:e.getNameOrHref(u,!0),key:`menu-${u.children[0].name}`},{default:h(()=>[m(i,{type:u.children[0].icon||""},null,8,["type"]),g("span",null,S(e.showTitle(u.children[0])),1)]),_:2},1032,["name"]))],64)):(l(),_(f,{key:1},[e.showChildren(u)?(l(),p(d,{key:`menu-${u.name}`,"parent-item":u},null,8,["parent-item"])):(l(),p(y,{name:e.getNameOrHref(u),key:`menu-${u.name}`},{default:h(()=>[m(i,{type:u.icon||"",size:"25"},null,8,["type"]),g("span",Oe,S(e.showTitle(u)),1)]),_:2},1032,["name"]))],64))],64))),256))]),_:1},8,["name"])}var Te=b(be,[["render",Le]]);const Me={name:"SideMenu",mixins:[V],components:{SideMenuItem:Te},props:{menuList:{type:Array,default:()=>[]},collapsed:{type:Boolean},theme:{type:String,default:"dark"},mode:{type:String,default:"vertical"},accordion:Boolean,activeName:{type:String,default:""},openNames:{type:Array,default:()=>[]}},data(){return{openedNames:[]}},watch:{activeName(e){this.accordion?this.openedNames=this.getOpenedNamesByActiveName(e):this.openedNames=_e(this.openedNames,this.getOpenedNamesByActiveName(e))},openNames(e){this.openedNames=e},openedNames(){this.$nextTick(()=>{this.$refs.menu.updateOpened()})}},methods:{handleSelect(e){this.$emit("on-select",e)},getOpenedNamesByActiveName(e){return this.$route.matched.map(t=>t.name).filter(t=>t!==e)},updateOpenName(e){e==="home"?this.openedNames=[]:this.openedNames=this.getOpenedNamesByActiveName(e)}},mounted(){console.log("collapsed",this.collapsed)}},Ce={class:"side-menu-wrapper"},Ee={style:{"font-size":"15px"}},Ae={style:{"font-size":"15px"}},Pe={style:{float:"right"}},Ue=["list"],ze=["onClick"];function xe(e,t,n,o,s,r){const i=c("SideMenuItem"),d=c("Icon"),y=c("MenuItem"),v=c("side-menu-item"),u=c("menu-item"),O=c("Menu"),$=c("Tooltip");return l(),_("div",Ce,[E(m(O,{ref:"menu","active-name":n.activeName,"open-names":s.openedNames,accordion:n.accordion,theme:n.theme,mode:n.mode,width:"auto",onOnSelect:r.handleSelect},{default:h(()=>[P(e.$slots,"top"),g("div",{class:H([n.mode==="horizontal"?"head-menu":""])},[(l(!0),_(f,null,T(n.menuList,a=>(l(),_(f,null,[a.children&&a.children.length===1?(l(),_(f,{key:0},[e.showChildren(a)?(l(),p(i,{key:`menu-${a.name}`,collapsed:n.collapsed,parentItem:a},null,8,["collapsed","parentItem"])):(l(),p(y,{key:`menu-${a.children[0].name}`,name:e.getNameOrHref(a,!0)},{default:h(()=>[m(d,{type:a.children[0].icon||"",size:"25"},null,8,["type"]),g("span",Ee,S(e.showTitle(a.children[0])),1)]),_:2},1032,["name"]))],64)):(l(),_(f,{key:1},[e.showChildren(a)?(l(),p(v,{key:`menu-${a.name}`,"parent-item":a},null,8,["parent-item"])):(l(),p(u,{name:e.getNameOrHref(a),key:`menu-${a.name}`},{default:h(()=>[m(d,{type:a.children[0].icon||"",size:"25"},null,8,["type"]),g("span",Ae,S(e.showTitle(a)),1)]),_:2},1032,["name"]))],64))],64))),256))],2),g("div",Pe,[P(e.$slots,"end")])]),_:3},8,["active-name","open-names","accordion","theme","mode","onOnSelect"]),[[A,n.collapsed]]),E(g("div",{class:"menu-collapsed",list:n.menuList},[(l(!0),_(f,null,T(n.menuList,a=>(l(),p($,{key:`tooltip-${a.name}`,transfer:"",content:e.showTitle(a.children&&a.children[0]?a.children[0]:a),placement:"right"},{default:h(()=>[g("a",{class:"drop-menu-a",style:{textAlign:"center"},onClick:ct=>r.handleSelect(e.getNameOrHref(a,!0))},[m(d,{type:a.icon||a.children&&a.children[0].icon,size:25,color:"white"},null,8,["type"])],8,ze)]),_:2},1032,["content"]))),128))],8,Ue),[[A,!n.collapsed&&n.mode==="vertical"]])])}var j=b(Me,[["render",xe]]);const He={name:"HeadMenu",components:{SideMenu:j},props:{menuList:{type:Array,default:()=>[]},routerName:{type:String,default:""},isCollapsed:{type:Boolean}},data(){return{}},computed:{rotateIcon(){return["menu-icon",this.isCollapsed?"rotate-icon":""]}},methods:{handleChangeSider(){this.$emit("on-chage-sider")},turnToPage(e){this.$emit("on-select",e)},hnadleShowModal(){this.$router.push({name:"login_or_register"})}},mounted(){console.log("menuList",this.menuList)}},Re={class:"head-menu"},Be={class:"layout-header-icon"};function qe(e,t,n,o,s,r){const i=c("Icon"),d=c("SideMenu");return l(),_("div",Re,[g("div",null,[m(d,{accordion:"",collapsed:"",mode:"horizontal",theme:"light","active-name":n.routerName,"menu-list":n.menuList,onOnSelect:r.turnToPage},{top:h(()=>[g("div",Be,[m(i,{class:H(r.rotateIcon),size:"24",type:"md-menu",onClick:r.handleChangeSider},null,8,["class","onClick"])])]),_:1},8,["active-name","menu-list","onOnSelect"])])])}var Ve=b(He,[["render",qe]]);const je={name:"Main",components:{SideMenu:j,HeadMenu:Ve},data(){return{isCollapsed:!0,collapsed:!1}},computed:{menuList(){return this.$store.getters.menuList},userName(){return this.$store.state.user.userName},rotateIcon(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}},methods:{collapsedSider(){this.$refs.side1.toggleCollapse(),this.collapsed=!this.collapsed},handleClick(e){this.turnToPage(e)},turnToPage(e){let{name:t,params:n,query:o}={};if(typeof e=="string"?t=e:(t=e.name,n=e.params,o=e.query),t.indexOf("isTurnByHref_")>1){window.open(t.split("_")[1]);return}this.$router.push({name:t,params:n,query:o})}},mounted(){this.$nextTick(()=>{he(this.userName)&&this.$Message.info("\u6B61\u8FCE\u4F7F\u7528\u8005 "+this.userName+" \u767B\u5165")})}};function De(e,t,n,o,s,r){const i=c("SideMenu"),d=c("Sider"),y=c("HeadMenu"),v=c("Header"),u=c("router-view"),O=c("Content"),$=c("Layout");return l(),p($,{style:{height:"100%"},class:"main"},{default:h(()=>[m(d,{ref:"side1","hide-trigger":"",collapsible:"","collapsed-width":78,style:{background:"#5b6270"},modelValue:s.isCollapsed,"onUpdate:modelValue":t[0]||(t[0]=a=>s.isCollapsed=a)},{default:h(()=>[m(i,{accordion:"",ref:"sideMenu",type:"side","active-name":e.$route.name,collapsed:s.collapsed,"menu-list":r.menuList,onOnSelect:r.turnToPage},null,8,["active-name","collapsed","menu-list","onOnSelect"])]),_:1},8,["modelValue"]),m($,null,{default:h(()=>[m(v,{style:{padding:0},class:"layout-header-bar"},{default:h(()=>[m(y,{accordion:"",ref:"headMenu",routerName:e.$route.name,menuList:r.menuList,onOnChageSider:r.collapsedSider,onOnSelect:r.turnToPage},null,8,["routerName","menuList","onOnChageSider","onOnSelect"])]),_:1}),m(O,{class:"layout-content"},{default:h(()=>[m(u,null,{default:h(({Component:a})=>[(l(),p(J,null,[(l(),p(F(a)))],1024))]),_:1})]),_:1})]),_:1})]),_:1})}var k=b(je,[["render",De]]),D=[{path:"/",name:"home",redirect:"/home",component:k,meta:{hideInMenu:!0},children:[{path:"/home",name:"home",meta:{hideInMenu:!0,title:"\u9996\u9801",icon:"md-home"},component:()=>w(()=>import("./Home.b727bedf.js"),["js/Home.b727bedf.js","assets/Home.54cfc7a9.css","js/mock.96d8fd81.js"])}]},{path:"/signIn",name:"login_or_register",component:k,children:[{path:"/signIn",name:"login_or_register",meta:{title:"\u7ACB\u5373\u767B\u5165",icon:"md-preson"},component:()=>w(()=>import("./index.ae61259f.js"),["js/index.ae61259f.js","assets/index.fa7d62ca.css","js/mock.96d8fd81.js"])}]},{path:"/forget",name:"forget_password",component:k,meta:{hideInMenu:!0},children:[{path:"/forget",name:"forget_password",meta:{title:"\u8A3B\u518A",icon:""},component:()=>w(()=>import("./forget-password.048fba8d.js"),["js/forget-password.048fba8d.js","assets/forget-password.caa5d62a.css","js/mock.96d8fd81.js"])}]},{path:"/register",name:"register",component:k,meta:{hideInMenu:!0},children:[{path:"/register",name:"register",meta:{title:"\u8A3B\u518A",icon:""},component:()=>w(()=>import("./index.433db803.js"),["js/index.433db803.js","assets/index.d936f39e.css","js/mock.96d8fd81.js"])}]},{path:"/about/BookCity",name:"about_book_city",component:k,children:[{path:"/about/BookCity",name:"about_book_city",meta:{title:"\u95DC\u65BC\u66F8\u57CE",icon:""},component:()=>w(()=>import("./about.415eeaed.js"),["js/about.415eeaed.js","assets/about.fe7902bb.css","js/mock.96d8fd81.js"])}]}];const G=Y({routes:D,history:Q()});G.afterEach((e,t,n)=>{window.document.title=e.meta.title,console.log("router.aftereach"),R.LoadingBar.finish(),window.scrollTo(0,0)});var Ge={state:{mainMenuList:[]},getters:{menuList:(e,t,n)=>q(D,n.user.access)}};const Ke=e=>{const{statusText:t,status:n,request:{responseURL:o}}=e;let s={type:"ajax",code:n,mes:t,url:o};o.includes("save_error_logger")||K.dispatch("addErrorLog",s)};class We{constructor(t=baseURL){this.baseUrl=t,this.queue={}}getInsideConfig(){return{baseURL:this.baseUrl,headers:{}}}destroy(t){delete this.queue[t],Object.keys(this.queue).length}interceptors(t,n){t.interceptors.request.use(o=>(Object.keys(this.queue).length,this.queue[n]=!0,o),o=>Promise.reject(o)),t.interceptors.response.use(o=>{this.destroy(n);const{data:s,status:r}=o;return{data:s,status:r}},o=>{this.destroy(n);let s=o.response;if(!s){const{request:{statusText:r,status:i},config:d}=JSON.parse(JSON.stringify(o));s={statusText:r,status:i,request:{responseURL:d.url}}}return Ke(s),Promise.reject(o)})}request(t){const n=X.create();return t=Object.assign(this.getInsideConfig(),t),this.interceptors(n,t.url),n(t)}}const Ze=M.baseUrl.pro,C=new We(Ze),Je=({userName:e,password:t})=>{const n={userName:e,password:t};return C.request({url:"login",data:n,method:"post"})},Fe=e=>C.request({url:"getUserInfo",params:{token:e},method:"get"}),Ye=e=>C.request({url:"addMember",data:e,method:"post"});var Qe={state:{access:"",userId:"",userName:"",userList:[],token:Se(),hasGetInfo:!1},mutations:{setAccess(e,t){e.access=t},setUserId(e,t){e.userId=t},setUserName(e,t){e.userName=t},setToken(e,t){e.token=t,ke(t)},setHasGetInfo(e,t){console.log("setHasGetInfo",t),e.hasGetInfo=t}},getters:{},actions:{handleLogin({commit:e},{form:t}){let n=t.userName.trim(),o=t.password;return new Promise((s,r)=>{Je({userName:n,password:o}).then(i=>{const d=i.data;e("setToken",d.token),s()}).catch(i=>{r(i)})})},getUserInfo({state:e,commit:t}){return new Promise((n,o)=>{try{Fe(e.token).then(s=>{const r=s.data;t("setUserName",r.userName),t("setUserId",r.user_id),t("setAccess",r.access),t("setHasGetInfo",!0),n(r)}).catch(s=>{o(s)})}catch(s){o(s)}})},addMember({commit:e},{form:t}){return new Promise((n,o)=>{console.log("form =>",t),Ye({form:t}).then(s=>{e("setToken",t.account),n()}).catch(s=>{o(s)})})},handleLoginOut({state:e,commit:t}){return new Promise((n,o)=>{this.handleLoginOut(e,token).then(()=>{t("setToken",""),t("setAccess",[]),n()}).catch(s=>{o(s)})})}}},K=ee({state:{},mutations:{},actions:{},modules:{app:Ge,user:Qe}}),Xe={construction:"\u65BD\u5DE5\u4E2D...",meal_time:"\u63D0\u4F9B\u6642\u6BB5",login_or_register:"\u767B\u5165/\u8A3B\u518A",member_login:"\u6703\u54E1\u767B\u5165",plz_type_account:"\u8ACB\u8F38\u5165\u5E33\u865F",plz_type_pssword:"\u8ACB\u8F38\u5165\u5BC6\u78BC",login:"\u767B\u5165",forget_password:"\u5FD8\u8A18\u5BC6\u78BC",not_member:"\u9084\u4E0D\u662F\u6703\u54E1?",register:"\u8A3B\u518A",eather_login:"\u5176\u4ED6\u767B\u5165\u65B9\u5F0F",gooole_login:"Google \u767B\u5165",line_login:"LINE \u767B\u5165",reset_password:"\u91CD\u65B0\u8A2D\u5B9A\u5BC6\u78BC",plz_type_phone:"\u8ACB\u8F38\u5165\u624B\u6A5F\u865F\u78BC",no_valid:"\u683C\u5F0F\u932F\u8AA4",next_step:"\u4E0B\u4E00\u6B65",confirm:"\u78BA\u8A8D",add_verification_code:"\u7522\u751F\u9A57\u8B49\u78BC",x_seound:"({x})\u79D2\u5F8C\u91CD\u65B0\u7522\u751F",plz_type_code:"\u8ACB\u8F38\u5165\u9A57\u8B49\u78BC",phone:"\u624B\u6A5F\u865F\u78BC",phone_valid_code:"\u624B\u6A5F\u9A57\u8B49\u78BC",valid_phone:"\u9A57\u8B49\u624B\u6A5F\u865F\u78BC",write_base_info:"\u586B\u5BEB\u8CC7\u6599",register_finish:"\u5B8C\u6210\u8A3B\u518A",account:"\u5E33\u865F",mail:"\u4FE1\u7BB1",password:"\u5BC6\u78BC",confirm_password:"\u78BA\u8A8D\u5BC6\u78BC",password_tip:`1. \u5BC6\u78BC\u9577\u5EA6\u97008\u5B57\u5143\u4EE5\u4E0A
2. \u5BC6\u78BC\u9808\u5305\u542B\u6578\u5B57(0-9) 
 3. \u5BC6\u78BC\u9808\u5305\u542B\u5927\u5C0F\u5BEB\u7684\u82F1\u6587\u5B57\u6BCD`,birthday:"\u751F\u65E5",year:"\u5E74(\u897F\u5143)",month:"\u6708\u4EFD",gender:"\u6027\u5225",female:"\u5973\u6027",male:"\u7537\u6027",hide:"\u4E0D\u63D0\u4F9B",go_home:"\u56DE\u5230\u66F8\u57CE",register_finish_msg:"\u606D\u559C\u60A8\u8A3B\u518A\u6210\u529F!",wait_turn_to_loign:"\u60A8\u5C07\u65BC {x} \u79D2\u5F8C\u56DE\u5230\u66F8\u57CE",about_book_city:"\u95DC\u65BC\u66F8\u57CE",show_paln:"\u986F\u793A\u66F8\u57CE\u898F\u5283",show_uml_user:"\u986F\u793A\u4F7F\u7528\u8005\u6848\u4F8B"},et={};const L=navigator.language,tt=L==="zh-RW"||L==="en-US"?L:!1;let nt=tt||ye("local")||"zh-TW";const ot={"zh-TW":Object.assign(te,Xe),"en-US":Object.assign(ne,et)},st=oe({locale:nt,legacy:!1,messages:ot});const N={TEST:{userName:"TEST",user_id:"1",access:["member"],token:"TEST"},member:{userName:"member",user_id:"2",access:["member"],token:"member"}},rt=e=>(e=JSON.parse(e.body),{token:N[e.userName].token}),at=e=>null,it=e=>{e=JSON.parse(e.body).form;let t=e.account,n=Object.keys(N).length+1;N[t]={userName:t,user_id:n.toString(),access:["member"],token:t},console.log("USER_LIST",N)},lt=e=>{const t=Ne(e.url);return N[t.token]};I.setup({timeout:300});I.mock(/\/login/,rt);I.mock(/\/logout/,at);I.mock(/\/addMember/,it);I.mock(/\/getUserInfo/,lt);const W=se(ce);W.config.globalProperties.$config=M;W.use(G).use(K).use(st).use(R).mount("#app");export{b as _,mt as a,ht as b,he as i,dt as v};
