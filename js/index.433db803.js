var M=Object.defineProperty,q=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var B=(e,o,i)=>o in e?M(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,I=(e,o)=>{for(var i in o||(o={}))W.call(o,i)&&B(e,i,o[i]);if(z)for(var i of z(o))D.call(o,i)&&B(e,i,o[i]);return e},P=(e,o)=>q(e,T(o));import{_ as $,v as N,a as G,b as O}from"./index.30f1037c.js";import{r as n,o as f,c as w,b as t,w as s,d as u,t as l,u as c,x as A,F as S,e as R,a as b,z as F}from"./mock.96d8fd81.js";const E={props:{},data(){return{disBtn:!1,isWait:!1,second:60,timer:null,form:{phone:"",validCode:""},rule:{phone:[{required:!0,validator:this.validatorPhone,message:this.$t("no_valid"),trigger:"blur"}]}}},methods:{sendPhone(){this.$Message.info("\u7CFB\u7D71\u5DF2\u6210\u529F\u5BC4\u51FA\u9A57\u8B49\u78BC"),this.disBtn=!0,this.isWait=!0,this.timer=setInterval(()=>{this.second===0?this.turnToLogin():this.second--},1e3)},turnToLogin(){this.$router.push({name:"login_or_register"})},validCodeFun(){this.$emit("valid-code")},validatorPhone(){return!!N(this.form.phone)}}};function Y(e,o,i,y,r,_){const d=n("Col"),m=n("Input"),p=n("Button"),h=n("Row"),g=n("FormItem"),v=n("Form");return f(),w("div",null,[t(v,{ref:"form",model:r.form,rules:r.rule,class:"form"},{default:s(()=>[t(g,{prop:"phone"},{default:s(()=>[t(h,{style:{margin:"50px"}},{default:s(()=>[t(d,{span:"5",class:"title"},{default:s(()=>[u("p",null,l(e.$t("phone")),1)]),_:1}),t(d,{span:"13"},{default:s(()=>[t(m,{size:"large",type:"email",modelValue:r.form.phone,"onUpdate:modelValue":o[0]||(o[0]=V=>r.form.phone=V),placeholder:e.$t("plz_type_phone")},null,8,["modelValue","placeholder"])]),_:1}),t(d,{span:"3",offset:"1"},{default:s(()=>[t(p,{class:"btn",size:"large",type:"primary",disabled:r.disBtn,onClick:_.sendPhone},{default:s(()=>[c(l(r.isWait?e.$t("x_seound",{x:r.second}):e.$t("add_verification_code")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1}),t(g,{prop:"validCode"},{default:s(()=>[t(h,{style:{margin:"-50px auto auto 38px"}},{default:s(()=>[t(d,{span:"5",class:"title"},{default:s(()=>[u("p",null,l(e.$t("plz_type_code")),1)]),_:1}),t(d,{span:"10"},{default:s(()=>[t(m,{size:"large",type:"text",modelValue:r.form.validCode,"onUpdate:modelValue":o[1]||(o[1]=V=>r.form.validCode=V)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(g,{style:{"margin-left":"300px"}},{default:s(()=>[t(p,{class:"btn",size:"large",type:"primary",disabled:r.form.validCode.length!==6,onClick:_.validCodeFun},{default:s(()=>[c(l(e.$t("next_step")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["model","rules"])])}var j=$(E,[["render",Y]]);const H={props:{},data(){return{form:{account:"",mail:"",password:"",confirmPassword:"",birthday:{year:"",month:""},gender:""},rule:{account:[{required:!0}],mail:[{required:!0,validator:this.validatorMail,message:this.$t("no_valid"),trigger:"blur"}],password:[{required:!0,validator:this.validatorPassword,message:this.$t("no_valid"),trigger:"blur"}],birthday:[{required:!0}],gender:[{required:!0}]}}},computed:{yearList(){let e=[],o=new Date().getFullYear();for(let i=1989;i<o;i++)e.push(i+1);return e},monthList(){let e=[];for(let o=0;o<12;o++)e.push(o+1);return e},token(){return this.$store.state.user.token}},methods:P(I({},A(["addMember","getUserInfo"])),{validatorMail(){return!!G(this.form.mail)},validatorPassword(){return!!O(this.form.password)},handleSend(){this.$refs.form.validate(e=>{if(!e)return;let o=I({},this.form);delete o.confirmPassword,this.addMember({form:o}).then(i=>{this.getUserInfo().then(y=>{this.$emit("send-form")}).catch(y=>{this.$Message.error("\u6293\u4E0D\u5230\u4F7F\u7528\u8005\u8CC7\u6599"+y)})}).catch(i=>{this.$Message.error("\u4F7F\u7528\u8005\u65B0\u589E\u5931\u6557"+i)})})}})},J={class:"form-title"},K={class:"title"},Q={class:"title"},X={class:"title"},Z={style:{"font-size":"20px","text-align":"center"}},ee={class:"tip"},te={class:"title"},oe={class:"title"},se={class:"title"},re={class:"title"};function ne(e,o,i,y,r,_){const d=n("Input"),m=n("Divider"),p=n("FormItem"),h=n("Col"),g=n("Option"),v=n("Select"),V=n("Row"),C=n("Radio"),U=n("RadioGroup"),x=n("Button"),L=n("Form");return f(),w("div",null,[t(L,{ref:"form",model:r.form,rules:r.rule,class:"form"},{default:s(()=>[u("b",J,l(e.$t("write_base_info")),1),t(p,{prop:"account"},{label:s(()=>[u("span",K,l(e.$t("account")),1)]),default:s(()=>[t(d,{style:{width:"80%","margin-left":"10px"},size:"large",type:"text",modelValue:r.form.account,"onUpdate:modelValue":o[0]||(o[0]=a=>r.form.account=a)},null,8,["modelValue"]),t(m)]),_:1}),t(p,{prop:"mail"},{label:s(()=>[u("span",Q,l(e.$t("mail")),1)]),default:s(()=>[t(d,{style:{width:"80%","margin-left":"10px"},size:"large",type:"text",modelValue:r.form.mail,"onUpdate:modelValue":o[1]||(o[1]=a=>r.form.mail=a)},null,8,["modelValue"]),t(m)]),_:1}),t(p,{prop:"password"},{label:s(()=>[u("span",X,l(e.$t("password")),1)]),default:s(()=>[t(d,{style:{width:"80%","margin-left":"10px"},size:"large",type:"password",password:"",modelValue:r.form.password,"onUpdate:modelValue":o[2]||(o[2]=a=>r.form.password=a)},null,8,["modelValue"])]),_:1}),t(p,{prop:"confirmPassword"},{default:s(()=>[u("span",Z,l(e.$t("confirm_password")),1),t(d,{style:{width:"80%","margin-left":"10px"},size:"large",type:"password",password:"",modelValue:r.form.confirmPassword,"onUpdate:modelValue":o[3]||(o[3]=a=>r.form.confirmPassword=a)},null,8,["modelValue"]),u("p",ee,l(e.$t("password_tip")),1),t(m)]),_:1}),t(p,{prop:"birthday"},{default:s(()=>[t(V,{align:"middle"},{default:s(()=>[t(h,{span:"3"},{default:s(()=>[u("span",te,l(e.$t("birthday")),1)]),_:1}),t(h,{span:"9",style:{"margin-left":"10px"}},{default:s(()=>[u("span",oe,l(e.$t("year")),1),t(v,{modelValue:r.form.birthday.year,"onUpdate:modelValue":o[4]||(o[4]=a=>r.form.birthday.year=a),size:"large"},{default:s(()=>[(f(!0),w(S,null,R(_.yearList,(a,k)=>(f(),b(g,{key:`year-${k}`,value:a},{default:s(()=>[c(l(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(h,{span:"9",offset:"1"},{default:s(()=>[u("span",se,l(e.$t("month")),1),t(v,{modelValue:r.form.birthday.month,"onUpdate:modelValue":o[5]||(o[5]=a=>r.form.birthday.month=a),size:"large"},{default:s(()=>[(f(!0),w(S,null,R(_.monthList,(a,k)=>(f(),b(g,{key:`month-${k}`,value:a},{default:s(()=>[c(l(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(m)]),_:1}),t(p,{prop:"gender"},{label:s(()=>[u("span",re,l(e.$t("gender")),1)]),default:s(()=>[t(U,{modelValue:r.form.gender,"onUpdate:modelValue":o[6]||(o[6]=a=>r.form.gender=a)},{default:s(()=>[t(C,{label:"male",class:"radio-text"},{default:s(()=>[c(l(e.$t("female")),1)]),_:1}),t(C,{label:"female",class:"radio-text"},{default:s(()=>[c(l(e.$t("male")),1)]),_:1}),t(C,{label:"hide",class:"radio-text"},{default:s(()=>[c(l(e.$t("hide")),1)]),_:1})]),_:1},8,["modelValue"]),t(m)]),_:1}),t(p,{style:{"margin-left":"300px"}},{default:s(()=>[t(x,{type:"primary",size:"large",onClick:_.handleSend},{default:s(()=>[c(l(e.$t("confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])}var le=$(H,[["render",ne]]);const ie={data(){return{second:10,timer:null}},computed:{time(){return 1 .toString()}},methods:{turnToLogin(){this.$router.push({name:"home"})}},mounted(){this.timer=setInterval(()=>{this.second===0?this.turnToLogin():this.second--},1e3)},beforeDestroy(){clearInterval(this.timer)}},ae={class:"div"},de={class:"msg title"},ue={class:"msg"};function me(e,o,i,y,r,_){const d=n("Icon"),m=n("Button");return f(),w("div",ae,[t(d,{color:"green",size:"50",type:"md-checkmark-circle-outline"}),u("p",de,l(e.$t("register_finish_msg")),1),u("p",ue,l(e.$t("wait_turn_to_loign",{x:r.second})),1),t(m,{type:"warning",size:"large",style:{"margin-top":"-100px"},onClick:_.turnToLogin},{default:s(()=>[c(l(e.$t("go_home")),1)]),_:1},8,["onClick"])])}var pe=$(ie,[["render",me],["__scopeId","data-v-4e75ff06"]]);const _e={components:{PhoneValid:j,WriteBaseInfo:le,RegisterFinish:pe},data(){return{show:"valid",current:0}},methods:{changeStep(e){console.log("typeof",typeof e),typeof e=="number"&&(this.current=e,e===1?this.show="write":e===2&&(this.show="finish"))}}},fe={class:"div"};function ce(e,o,i,y,r,_){const d=n("Step"),m=n("Steps"),p=n("PhoneValid"),h=n("WriteBaseInfo"),g=n("RegisterFinish");return f(),w("div",fe,[t(m,{current:r.current},{default:s(()=>[t(d,{title:e.$t("valid_phone")},null,8,["title"]),t(d,{title:e.$t("write_base_info")},null,8,["title"]),t(d,{title:e.$t("register_finish")},null,8,["title"])]),_:1},8,["current"]),r.show==="valid"?(f(),b(p,{key:0,onValidCode:o[0]||(o[0]=v=>_.changeStep(1))})):F("",!0),r.show==="write"?(f(),b(h,{key:1,onSendForm:o[1]||(o[1]=v=>_.changeStep(2))})):F("",!0),r.show==="finish"?(f(),b(g,{key:2})):F("",!0)])}var ve=$(_e,[["render",ce]]);export{ve as default};
